<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City of Heroes Planner</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/stats.css">
    <link rel="stylesheet" href="css/modals.css">
</head>
<body>
    <div class="container">
        <!-- Top Panel -->
        <div class="top-panel">
            <input type="text" id="buildName" placeholder="Build Name" value="Fire/Fire Blaster Build">
            
            <select id="archetypeSelect" onchange="onArchetypeChange()">
                <option value="">Select Archetype...</option>
            </select>
            
            <select id="primarySelect" onchange="onPrimaryChange()" disabled>
                <option value="">Select Primary...</option>
            </select>
            
            <select id="secondarySelect" onchange="onSecondaryChange()" disabled>
                <option value="">Select Secondary...</option>
            </select>

            <div class="io-level-setting">
                <label>Common IO Level:</label>
                <input type="range" min="10" max="53" value="50" id="globalIOLevel" oninput="updateGlobalIOLevel()">
                <span id="globalIOLevelDisplay">Level 50</span>
            </div>

            <div class="level-info">
                <label>Progression Mode:</label>
                <select id="progressionMode" onchange="changeProgressionMode()">
                    <option value="auto">Auto-Level (Recommended)</option>
                    <option value="freeform">Freeform</option>
                </select>
                <label>Character Level: <span id="charLevel">1</span></label>
            </div>

            <div class="resource-badge">
                Slots: <span>67/67</span>
            </div>
        </div>

        <!-- Stats Dashboard Row -->
        <div class="stats-dashboard">
            <div class="stats-dashboard-items">
                <div class="stat-item">
                    <div class="stat-label stat-damage">Damage</div>
                    <div class="stat-value">+95.3%</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label stat-accuracy">Accuracy</div>
                    <div class="stat-value">+42.7%</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label stat-recharge">Recharge</div>
                    <div class="stat-value">+75.1%</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label stat-defense">Defense</div>
                    <div class="stat-value">38.5%</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label stat-resistance">Resistance</div>
                    <div class="stat-value">25.0%</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label stat-recovery">Recovery</div>
                    <div class="stat-value">+45.0%</div>
                </div>
            </div>
            <div class="stats-dashboard-actions">
                <button class="stats-btn" onclick="openStatsSelector()">
                    <span>‚öô</span> Configure Stats
                </button>
                <button class="stats-btn" onclick="openStatsDetail()">
                    <span>üìä</span> Detailed View
                </button>
            </div>
        </div>

        <!-- Main Columns -->
        <div class="columns">
            <!-- Column A: Available Powers -->
            <div class="column">
                <div class="column-header">Available Powers</div>
                <div class="column-content">
                    <div id="availablePrimaryPowers" style="margin-bottom: 12px;">
                        <!-- Primary powers will be populated here -->
                    </div>

                    <div id="availableSecondaryPowers">
                        <!-- Secondary powers will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Column B: Primary Powers -->
            <div class="column">
                <div class="column-header">Primary Powers</div>
                <div class="column-content" id="selectedPrimaryPowers">
                    <!-- Selected primary powers will be populated here -->
                </div>
            </div>

            <!-- Column C: Secondary Powers -->
            <div class="column">
                <div class="column-header">Secondary Powers</div>
                <div class="column-content" id="selectedSecondaryPowers">
                    <!-- Selected secondary powers will be populated here -->
                </div>
            </div>

            <!-- Column D: Pool Powers -->
            <div class="column">
                <div class="column-header">Pool Powers</div>
                <div class="column-content">
                    <!-- Pool powers will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Enhancement Picker Modal -->
    <div class="modal-overlay" id="modal" onclick="closeModal()">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">
                    <button class="back-button" id="backBtn" onclick="goBack()">‚Üê</button>
                    <span id="modalTitle">Choose an enhancement</span>
                </div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>

            <div class="modal-body">
                <!-- CATEGORY VIEW -->
                <div class="category-view" id="categoryView">
                    <div class="category-grid">
                        <div class="category-option" onclick="selectCategory('io-set')">
                            <div class="category-name">IO set</div>
                        </div>

                        <div class="category-option" onclick="selectCategory('very-rare')">
                            <div class="category-name">Very rare</div>
                            <div class="category-hint">Purple/PvP sets</div>
                        </div>

                        <div class="category-option" onclick="selectCategory('event')">
                            <div class="category-name">Event</div>
                            <div class="category-hint">Winter sets</div>
                        </div>

                        <div class="category-option" onclick="selectCategory('archetype')">
                            <div class="category-name">Archetype</div>
                            <div class="category-hint">Blaster ATOs</div>
                        </div>
                    </div>

                    <div class="category-grid">
                        <div class="category-option" onclick="selectCategory('io-generic')">
                            <div class="category-name">IO generic</div>
                        </div>

                        <div class="category-option" onclick="selectCategory('special')">
                            <div class="category-name">Special</div>
                            <div class="category-hint">Hamidon</div>
                        </div>

                        <div class="category-option" onclick="selectCategory('to-do-so')">
                            <div class="category-name">TO/DO/SO</div>
                        </div>
                    </div>
                </div>

                <!-- SELECTION VIEW: IO Sets -->
                <div class="selection-view" id="selectionViewSets">
                    <div class="types-panel">
                        <div class="types-title">Types</div>
                        <div class="type-option selected">ranged aoe</div>
                        <div class="type-option">tohit debuff</div>
                        <div class="type-option">knockback</div>
                    </div>

                    <div class="sets-panel">
                        <!-- Sets loaded dynamically as rows -->
                    </div>
                </div>

                <!-- SELECTION VIEW: IO Sets -->
                <div class="selection-view" id="selectionViewSets">
                    <div class="types-panel">
                        <div class="types-title">Types</div>
                        <div class="type-option selected">ranged aoe</div>
                        <div class="type-option">tohit debuff</div>
                        <div class="type-option">knockback</div>
                    </div>

                    <div class="sets-panel">
                        <!-- Sets loaded dynamically as icon grid -->
                    </div>
                </div>

                <!-- SELECTION VIEW: IO Generic -->
                <div class="selection-view" id="selectionViewGeneric">
                    <div class="generic-grid">
                        <!-- Icons loaded dynamically -->
                    </div>
                </div>

                <!-- SELECTION VIEW: Special -->
                <div class="selection-view" id="selectionViewSpecial">
                    <div class="special-grid">
                        <!-- Icons loaded dynamically -->
                    </div>
                </div>

                <!-- SELECTION VIEW: TO/DO/SO -->
                <div class="selection-view" id="selectionViewSO">
                    <div class="so-grid">
                        <!-- Icons loaded dynamically -->
                    </div>
                </div>

                </div>
            </div>
        </div>

        <!-- Tooltip -->
    <div class="tooltip" id="tooltip"></div>

    <!-- JavaScript Files -->
    <script src="js/data/archetypes.js"></script>
    <script src="js/data/powersets.js"></script>
    <script src="js/data/power-pools.js"></script>
    <script src="js/data/io-sets.js"></script>
    <script src="js/data/enhancements.js"></script>
    <script src="js/data/level-progression.js"></script>
    <script src="js/app.js"></script>
    <script src="js/build.js"></script>
    <script src="js/icons.js"></script>
    <script src="js/ui.js"></script>  <!-- MOVED BEFORE character-creator.js -->
    <script src="js/character-creator.js"></script>
    <script src="js/enhancement-selector.js"></script>
    <script src="js/stats.js"></script>
</body>
</html>
